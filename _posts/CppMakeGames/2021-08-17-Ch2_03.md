---
title: "C++ Games Chapter2_3 ë‹¤í˜•ì„±ìœ¼ë¡œ ìœ ì—°í•˜ê²Œ"
excerpt: "ë‹¤í˜•ì„±ìœ¼ë¡œ ìœ ì—°í•˜ê²Œ"
categories:
  - Cpp MakeGames
tags:
  - Cpp
last_modified_at: 2021-08-17
toc: true
toc_sticky: true
toc_label: "ëª©ì°¨ğŸ‘€"
---

<pre>ë³¸ í•„ê¸°ëŠ” ì¸í”„ëŸ°ì˜ í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ ê°•ì˜ì¸ <b>í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€</b> ë¥¼ ë“£ê³  ì‘ì„±í•©ë‹ˆë‹¤.</pre>{: .notice--success}

### ë‹¤í˜•ì„±ìœ¼ë¡œ ìœ ì—°í•˜ê²Œ

**ê¸°ì¡´ì˜ ì½”ë“œ**
```cpp
...
class Example : public Game2D
{
public:
    Triangle my_tri;
    Circle my_cir;
    Box my_box;

    Example()
        : Game2D()
    {
        my_tri.init(Colors::gold, vec2{ -0.5f, 0.2f }, 0.25f);
        my_cir.init(Colors::olive, vec2{ 0.1f, 0.1f }, 0.2f);
        my_box.init(Colors::blue, vec2{ 0.0f, 0.5f }, 0.15f, 0.25f);
    }

    void update() override
    {
        my_tri.draw();
        my_cir.draw();
        my_box.draw();
    }
};
...
```
my_tri, my_cir, my_box ê°€ í˜¸ì¶œí•˜ëŠ” draw() ëŠ” ëª¨ë‘ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ í•¨ìˆ˜ì´ë¯€ë¡œ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ í¬ì¸í„°ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤.

```cpp
void update() override
{
    GeometricObject * my_obj1 = &my_tri;
    GeometricObject * my_obj2 = &my_cir;
    GeometricObject * my_obj3 = &my_box;

    my_obj1->draw();
    my_obj2->draw();
    my_obj3->draw();
}
```
ë˜í•œ my_tri, my_cir, my_box ë¥¼ ê°€ì§€ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì´ìš©í•  ìˆ˜ë„ ìˆë‹¤.

```cpp
void update() override
{
    std::vector<GeometricObject *> my_objs; // #include <vector>

    my_objs.push_back(&my_tri);
    my_objs.push_back(&my_cir);
    my_objs.push_back(&my_box);

    for (const auto & obj : my_objs)
        obj->draw();
}
```
í›¨ì”¬ ìœ ì—°í•˜ê³  ê¹”ë”í•œ ì½”ë“œê°€ ë˜ì—ˆë‹¤.    

ì—¬ê¸°ì„œ my_objs ëŠ” ë©¤ë²„ë³€ìˆ˜ë¡œ, push_back ì€ ìƒì„±ìì—ì„œ í•˜ë„ë¡ ì˜®ê¸°ëŠ”ë° ì •ì ìœ¼ë¡œ ë©¤ë²„ë³€ìˆ˜ë¡œ ì¡´ì¬í•˜ë˜ my_tri, my_cir, my_box ë¥¼ ìƒì„±ìì—ì„œ ë™ì í• ë‹¹ìœ¼ë¡œ ìƒì„±í•œ í›„ push_back í•´ì£¼ë„ë¡ ë³€ê²½í•˜ë„ë¡ í•œë‹¤.

```cpp
class Example : public Game2D
{
public:
    std::vector<GeometricObject *> my_objs;

    Example()
        : Game2D()
    {
        auto *my_tri = new Triangle;    // auto í‚¤ì›Œë“œë¡œ ê°„ê²°í•˜ê²Œ
        auto *my_cir = new Circle;
        auto *my_box = new Box;

        my_tri->init(Colors::gold, vec2{ -0.5f, 0.2f }, 0.25f);
        my_cir->init(Colors::olive, vec2{ 0.1f, 0.1f }, 0.2f);
        my_box->init(Colors::blue, vec2{ 0.0f, 0.5f }, 0.15f, 0.25f);

        my_objs.push_back(my_tri);
        my_objs.push_back(my_cir);
        my_objs.push_back(my_box);
    }

    void update() override
    {
        for (const auto & obj : my_objs)
            obj->draw();
    }
};
```
í›¨ì”¬ ê°„ê²°í•˜ê²Œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤.

new ë¡œ ê°ì²´ë¥¼ ìƒì„±í•œ í›„ init í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì´ˆê¸°í™”í•˜ëŠ” ê³¼ì •ì´ ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë„í˜• í´ë˜ìŠ¤ë“¤ì˜ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì„œ í•´ê²°í•œë‹¤.

```cpp
// in Triangle.h
Triangle(const RGB & _color, const vec2 & _pos, const float & _size)
{
    init(_color, _pos, _size);
}

// in Circle.h
Circle(const RGB & _color, const vec2 & _pos, const float & _size)
{
    init(_color, _pos, _size);
}

// in Box.h
Box(const RGB & _color, const vec2 & _pos, const float & _width,
    const float & _height)
{
    init(_color, _pos, _width, _height);
}

// in main.cpp
class Example : public Game2D
{
public:
    std::vector<GeometricObject *> my_objs;

    Example()
        : Game2D()
    {
        auto *my_tri = new Triangle(Colors::gold, vec2{ -0.5f, 0.2f }, 0.25f);	// auto í‚¤ì›Œë“œë¡œ ê°„ê²°í•˜ê²Œ
        auto *my_cir = new Circle(Colors::olive, vec2{ 0.1f, 0.1f }, 0.2f);
        auto *my_box = new Box(Colors::blue, vec2{ 0.0f, 0.5f }, 0.15f, 0.25f);

        my_objs.push_back(my_tri);
        my_objs.push_back(my_cir);
        my_objs.push_back(my_box);
    }

    void update() override
    {
        for (const auto & obj : my_objs)
            obj->draw();
    }
};
```
ìƒˆë¡œìš´ ì˜¤ë¸Œì íŠ¸ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì§€ìš¸ ë•Œ ì¤‘ìš”í•œ update() í•¨ìˆ˜ëŠ” ê±´ë“œë¦´ í•„ìš”ê°€ ì—†ëŠ” ì¥ì ì´ ìƒê¸´ë‹¤.

### ì£¼ì˜ì‚¬í•­
ê°ì²´ë¥¼ ìƒì„±í•œ my_tri, my_cir, my_box ëª¨ë‘ my_objs ì—ì„œ ì‚¬ìš©í•˜ê³  ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ë¥¼ delete í•´ì¤„ ë•Œ my_objs ë¥¼ ì´ìš©í•´ delete í•´ì¤€ë‹¤.

```cpp
// in Triangle.h
// in class Triangle
~Triangle()
{
    printf("Triangle destructor\n");
}

// in main.cpp
// in class Example
~Example()
{
    for (const auto & obj : my_objs)
        delete obj;
}

// í”„ë¡œê·¸ë¨ ì¢…ë£Œì‹œ ì½˜ì†”ì°½ ì¶œë ¥
Display width = 1280 height = 960 Aspect ratio is 1.33333
ESC key ends main loop

```
Example í´ë˜ìŠ¤ì˜ ì†Œë©¸ìì—ì„œ my_objs ë¥¼ ì‚¬ìš©í•˜ì—¬ delete í•´ì¤„ ë•Œ ì˜¬ë°”ë¥´ê²Œ delete ê°€ ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì´ë•Œ Triangle í´ë˜ìŠ¤ì˜ ë¶€ëª¨ í´ë˜ìŠ¤ì¸ GeometricObject í´ë˜ìŠ¤ì˜ ì†Œë©¸ìë¥¼ ê°€ìƒí•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ì¤„ ê²½ìš° ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```cpp
// in GeometricObject.h
// in class GeometricObject
virtual ~GeometricObject()
{}

... ë‚˜ë¨¸ì§€ëŠ” ìœ„ì™€ ë™ì¼

//í”„ë¡œê·¸ë¨ ì¢…ë£Œì‹œ ì½˜ì†”ì°½ ì¶œë ¥
Display width = 1280 height = 960 Aspect ratio is 1.33333
ESC key ends main loop
Triangle destructor

```
ì˜¬ë°”ë¥´ê²Œ ì†Œë©¸ë˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.

ì´ë•Œ ëª¨ë˜ C++ ì„ ì ìš©í•´ ê°€ìƒí•¨ìˆ˜ì¸ ì†Œë©¸ìë¥¼ ì¶”ê°€í•˜ëŠ” ê³¼ì •ì„ í”¼í•˜ëŠ” ë°©ë²•ë„ ì¡´ì¬í•œë‹¤.

```cpp
class Example : public Game2D
{
public:
    std::vector<std::shared_ptr<GeometricObject>> my_objs;

    Example()
        : Game2D()
    {
        auto my_tri = std::make_shared<Triangle>(Colors::gold, vec2{ -0.5f, 0.2f }, 0.25f);	
        auto my_cir = std::make_shared<Circle>(Colors::olive, vec2{ 0.1f, 0.1f }, 0.2f);
        auto my_box = std::make_shared<Box>(Colors::blue, vec2{ 0.0f, 0.5f }, 0.15f, 0.25f);

        my_objs.push_back(my_tri);
        my_objs.push_back(my_cir);
        my_objs.push_back(my_box);
    } 

    ~Example()
    {
        /*for (const auto & obj : my_objs) shared_ptr ì‚¬ìš©ìœ¼ë¡œ delete ê°€ í•„ìš”ì—†ë‹¤.
            delete obj;*/
    }

    void update() override
    {
        for (const auto & obj : my_objs)
            obj->draw();
    }
};
```
ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° shared_ptr ì„ ì´ìš©í•´ì„œ delete ë¥¼ ìƒëµí•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.    
í”„ë¡œê·¸ë¨ ì¢…ë£Œì‹œ ì˜¬ë°”ë¥´ê²Œ ì†Œë©¸ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.    
ì´ë•Œ GeometricObject í´ë˜ìŠ¤ì˜ ê°€ìƒí•¨ìˆ˜ì¸ ì†Œë©¸ìë¥¼ ìƒëµí•´ë„ ë˜‘ê°™ì´ ì‘ë™í•œë‹¤.    

<pre>info notice :
<b>shared_ptr</b> ëŒ€ì‹  <b>unique_ptr</b> ì„ ì‚¬ìš©í•  ê²½ìš°ì—ëŠ” GeometricObject í´ë˜ìŠ¤ì˜ ê°€ìƒí•¨ìˆ˜ì¸ ì†Œë©¸ìê°€ ì¡´ì¬í•´ì•¼ ì˜¬ë°”ë¥´ê²Œ ì†Œë©¸ëœë‹¤.
ë˜í•œ <b>make_shared</b> ëŒ€ì‹  <b>make_unique</b> ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</pre>{: .notice--warning}
<br>
```cpp
Example()
    : Game2D()
{
    my_objs.push_back(std::make_shared<Triangle>(Colors::gold, vec2{ -0.5f, 0.2f }, 0.25f));
    my_objs.push_back(std::make_shared<Circle>(Colors::olive, vec2{ 0.1f, 0.1f }, 0.2f));
    my_objs.push_back(std::make_shared<Box>(Colors::blue, vec2{ 0.0f, 0.5f }, 0.15f, 0.25f));
} 
```
Example í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ ë”ìš± ê°„ê²°í•˜ê²Œ ìƒëµí•  ìˆ˜ ìˆë‹¤.

<pre>ë³¸ ë¸”ë¡œê·¸ëŠ” ê°œì¸ ê³µë¶€ ê¸°ë¡ì˜ ëª©ì ì„ ê°€ì§‘ë‹ˆë‹¤. í¬ìŠ¤íŠ¸ì˜ ë‚´ìš©ì€ ì–¸ì œë“ ì§€ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤.</pre>{: .notice--info}