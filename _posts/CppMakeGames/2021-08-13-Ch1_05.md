---
title: "C++ Games Chapter1_5 ì‚¬ìš´ë“œ íŒŒì¼ ì¬ìƒí•˜ê¸° FMOD ë¼ì´ë¸ŒëŸ¬ë¦¬"
excerpt: "FMOD ë¼ì´ë¸ŒëŸ¬ë¦¬"
categories:
  - Cpp MakeGames
tags:
  - Cpp
last_modified_at: 2021-08-13
toc: true
toc_sticky: true
toc_label: "ëª©ì°¨ğŸ‘€"
---

<pre>ë³¸ í•„ê¸°ëŠ” ì¸í”„ëŸ°ì˜ í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ ê°•ì˜ì¸ <b>í™ì •ëª¨ì˜ ê²Œì„ ë§Œë“¤ê¸° ì—°ìŠµ ë¬¸ì œ íŒ¨í‚¤ì§€</b> ë¥¼ ë“£ê³  ì‘ì„±í•©ë‹ˆë‹¤.</pre>{: .notice--success}

### FMOD ë¼ì´ë¸ŒëŸ¬ë¦¬
í•´ë‹¹ ê°•ì˜ì—ì„œ ì œê³µí•˜ëŠ” íŒŒì¼ì€ FMOD ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ëª¨ë“  ê¸°ë³¸ì„¸íŒ…ì´ ëœ ìƒíƒœì´ë‹¤.    
github-repository -> FMOD_test -> fmod_cpp_context í´ë”ì— ì¬ìƒí•  ìˆ˜ ìˆëŠ” wave, mp3 íŒŒì¼ë“±ì´ ì¡´ì¬í•œë‹¤.    
ì¤‘ìš”í•œ ê²ƒì€ fmod.dll , fmod64.dll ì´ ì¡´ì¬í•˜ëŠ” ê²ƒì¸ë°, ì–´ë–¤ ê²½ìš°ì—ëŠ” dll íŒŒì¼ë“¤ì„ exe íŒŒì¼ë“¤ê³¼ ê°™ì€ ê²½ë¡œì— ë‘ê¸°ë„ í•˜ëŠ”ë° í˜„ì¬ëŠ” í¸ì˜ìƒ í”„ë¡œì íŠ¸ íŒŒì¼ë“¤ê³¼ ê°™ì€ ìœ„ì¹˜ì— ë‘ì—ˆë‹¤.    
ë§Œì•½ FMOD ìŠ¤íŠœë””ì˜¤ë¥¼ ì„¤ì¹˜í–ˆë‹¤ë©´ Program Files(x86) -> FMOD SoundSystem -> FMOD Studio API Windows -> api -> lowlevel ì— include í•´ì•¼ë  í—¤ë”íŒŒì¼ë“¤ì´ ì¡´ì¬í•˜ëŠ” inc í´ë”ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ dll íŒŒì¼ë“¤ì´ ì¡´ì¬í•˜ëŠ” lib í´ë”ê°€ ìˆë‹¤.    
ì˜ˆì œì½”ë“œì—ì„œëŠ” fmod_lowlevel í´ë”ì— inc , lib í´ë”ê°€ ìˆë‹¤.  

### í”„ë¡œì íŠ¸ ì„¸íŒ…
fmod_test ì†”ë£¨ì…˜ì˜ fmod_cpp_context í”„ë¡œì íŠ¸ì˜ Properties ì—ì„œ ì„¸íŒ…ì„ í•  ìˆ˜ ìˆë‹¤.    
ìš°ì„  x64 , x32 ì¼ ê²½ìš° ê°ê° ì„¸íŒ…ì„ í•´ì¤˜ì•¼í•œë‹¤.    
C++ -> General -> Additional include Directories ì˜ ìœ„ì¹˜ê°€ fmod_lowlevel\inc í´ë”ë¡œ ì§€ì •ë˜ì–´ ìˆê³     
Linker -> General -> Additional Library Directories ì˜ ìœ„ì¹˜ê°€ fmod_lowlevel\lib ìœ¼ë¡œ ì§€ì •ë˜ì–´ ìˆë‹¤.    
Linker -> input -> Additional Dependencies ì˜ ìœ„ì¹˜ê°€ fmod64_vc.lib ìœ¼ë¡œ ë˜ì–´ìˆì–´ì•¼ í•œë‹¤.    
(x32 ì¼ ê²½ìš°ì—ëŠ” fmod_vc.lib ì—¬ì•¼ í•œë‹¤.)

### fmod_cpp_context ì†ŒìŠ¤íŒŒì¼
```cpp
//#include "fmod.h"  // c-context 
#include "fmod.hpp"  // C++ ì˜ ë¬¸ë²•
#include <iostream>
#include <conio.h>

/*
fmod api documentation
https://www.fmod.com/resources/documentation-api
*/

using namespace std;

int main()
{
    cout << "FMOD cpp conext example" << endl;

    FMOD::System     *system(nullptr);	// System ì€ í•˜ë‚˜ë§Œ ì„ ì–¸í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.
    FMOD::Sound      *sound(nullptr);	// Sound ëŠ” ì—¬ëŸ¬ê°œì˜ ì‚¬ìš´ë“œë¥¼ ì‚¬ìš©í•  ê²½ìš° ì—¬ëŸ¬ê°œë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.
    FMOD::Channel    *channel(nullptr);	// Channel ë„ ë§ˆì°¬ê°€ì§€ë¡œ í•œ System ì—ì„œ ì—¬ëŸ¬ê°œì˜ Channel ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.
    FMOD_RESULT       result;			// FMOD ì˜ ì‘ì—…ê²°ê³¼ê°€ ì˜ë‚˜ì™”ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” Flag
    unsigned int      version;			// FMOD ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë²„ì „ì„ í™•ì¸í•˜ëŠ” ë³€ìˆ˜
    void             *extradriverdata(nullptr);		// ì—¬ê¸°ì—ì„  ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

    result = FMOD::System_Create(&system);	// ì½”ë“œê°€ ë³´ê¸°ì¢‹ì§€ ì•Šë”ë¼ê³  ì˜¤ë¥˜ë¥¼ ë°˜ë“œì‹œ ì²´í¬í•˜ë„ë¡ ë‚¨ê²¨ë†“ëŠ”ë‹¤.
    if (result != FMOD_OK) return -1;		// ê²°ê³¼ê°€ ì •ìƒì´ë©´ result ë³€ìˆ˜ì— FMOD_OK ê°€ ë“¤ì–´ê°„ë‹¤.

    result = system->getVersion(&version);
    if (result != FMOD_OK) return -1;
    else printf("FMOD version %08x\n", version);

    result = system->init(32, FMOD_INIT_NORMAL, extradriverdata);	// init(ì±„ë„ê°œìˆ˜, ì´ˆê¸°í™” ë°©ë²•, extradriverdata)
    if (result != FMOD_OK) return -1;

    // loop ë¥¼ ì¼ ë‹¤. (ex ê³„ì† ë°˜ë³µë˜ëŠ” ë°°ê²½ìŒì•…)
    //result = system->createSound("singing.wav", FMOD_LOOP_NORMAL, 0, &sound);	

    // system ì—ì„œ createSound ë¥¼ í˜¸ì¶œí•´ì„œ wav íŒŒì¼ë¡œ ë¶€í„° sound ë¥¼ ìƒì„±í•œë‹¤.
    result = system->createSound("singing.wav", FMOD_LOOP_OFF, 0, &sound); // .mp3 files work!
    if (result != FMOD_OK) return -1;

    // system ì˜ playSound ë¥¼ í†µí•´ì„œ sound ë¥¼ ì¬ìƒí•  ìˆ˜ ìˆë‹¤. ë‹¤ì–‘í•œ ì±„ë„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    result = system->playSound(sound, 0, false, &channel);	
    if (result != FMOD_OK) return -1;

    // playSound ëŠ” ì¬ìƒì´ ë ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì£¼ì§€ ì•Šê³  ë°”ë¡œ ë‹¤ìŒ ì½”ë“œë¡œ ë„˜ì–´ê°€ê¸° ë•Œë¬¸ì— sound ê°€ ëë‚ ë•Œ ê¹Œì§€ while ë¬¸ìœ¼ë¡œ 
    // í”„ë¡œê·¸ë¨ì´ ê³„ì† ì‹¤í–‰ë˜ë„ë¡ í•´ì•¼í•œë‹¤. sound ì¬ìƒì´ ëë‚˜ë©´ ë¦¬ì†ŒìŠ¤ë¥¼ release í•´ì¤˜ì•¼ í•œë‹¤.
    // while ë¬¸ ë‚´ë¶€ì˜ (1) ê³¼ (2) ëŠ” ë³„ê°œë¡œ ê°ê° ì‚¬ìš©í•˜ëŠ” ì½”ë“œì´ë‹¤.
    while (true)
    {
        // (1)
        // system->update() ê°€ ì—†ì–´ë„ sound ëŠ” ì¬ìƒë  ìˆ˜ ìˆì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì¬ìƒì¤‘ì— ë¬¸ì œê°€ ìˆëŠ”ì§€ ì²´í¬í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.
        result = system->update();		
        if (result != FMOD_OK) return -1;

        if (channel)
        {
            bool playing = false;
            // ì¬ìƒì´ ëë‚œë‹¤ë©´ playing ì— false ê°€ ë“¤ì–´ì˜¤ë©´ì„œ while ë¬¸ì„ break ë¡œ ë¹ ì ¸ë‚˜ê°„ë‹¤.
            result = channel->isPlaying(&playing);	
            if (!playing) break;
        }

        // (2)
        // í‚¤ë³´ë“œ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš´ë“œ ì¬ìƒì„ ì¡°ì ˆ
        cout << "Press 0 to pause, 1 to resume, and x to exit" << endl;
        
        int i = getch(); // i is ASCII code

        if (i == '0')
            channel->setPaused(true);	// ìŒì•…ì´ ë©ˆì¶˜ë‹¤.
        else if (i == '1')
            channel->setPaused(false);	// ìŒì•…ì´ ë‹¤ì‹œ ì¬ìƒëœë‹¤.
        else if (i == 'x')
            break;
    }

    system->release();	
}

```
freesound.org ì—ì„œ ë¬´ë£Œ ì‚¬ìš´ë“œ íŒŒì¼ë“¤ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.


<pre>ë³¸ ë¸”ë¡œê·¸ëŠ” ê°œì¸ ê³µë¶€ ê¸°ë¡ì˜ ëª©ì ì„ ê°€ì§‘ë‹ˆë‹¤. í¬ìŠ¤íŠ¸ì˜ ë‚´ìš©ì€ ì–¸ì œë“ ì§€ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤.</pre>{: .notice--info}