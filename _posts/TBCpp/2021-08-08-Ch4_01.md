---
title: "C++ Chapter4_1 ì§€ì—­ ë³€ìˆ˜ì˜ ë²”ìœ„ Scope ì™€ ì§€ì†ê¸°ê°„ Duration, ì „ì—­ë³€ìˆ˜ Global Variable, ì •ì  ë³€ìˆ˜ Static Variable, ë‚´ë¶€ ì—°ê²° Internal Linkage, ì™¸ë¶€ ì—°ê±¸ External Linkage"
excerpt: "ì§€ì—­ ë³€ìˆ˜ì˜ ë²”ìœ„, ì§€ì†ê¸°ê°„"
categories:
  - Cpp
tags:
  - Cpp
last_modified_at: 2021-08-08
toc: true
toc_sticky: true
toc_label: "ëª©ì°¨ğŸ‘€"
---

<pre>ë³¸ í•„ê¸°ëŠ” ì¸í”„ëŸ°ì˜ í™ì •ëª¨ êµìˆ˜ë‹˜ì˜ ê°•ì˜ì¸ <b>í™ì •ëª¨ì˜ ë”°ë¼í•˜ë©° ë°°ìš°ëŠ” C++</b> ë¥¼ ë“£ê³  ì‘ì„±í•©ë‹ˆë‹¤.</pre>{: .notice--success}

### ì§€ì—­ ë³€ìˆ˜ì˜ ë²”ìœ„ Scope ì™€ ì§€ì†ê¸°ê°„ Duration
```cpp
int apple = 5;

cout << apple << endl;

{
    apple = 1;      // ë¸”ë¡ ë°–ì˜ apple
    int apple = 1;  // ë¸”ë¡ ë‚´ë¶€ì˜ ìƒˆë¡œìš´ apple

    cout << apple << endl;
}

cout << apple << endl;

// ì¶œë ¥
5
1
1
```
ë¸”ë¡ ë°–ìœ¼ë¡œ ë¹ ì ¸ë‚˜ê°€ë©´ ë¸”ë¡ ë‚´ë¶€ì— ìƒˆë¡œì¶”ê°€í•œ apple ì˜ ë©”ëª¨ë¦¬ê°€ ì‚¬ë¼ì§„ë‹¤.    
ë¸”ë¡ ë‚´ë¶€ì—ì„œëŠ” ë¸”ë¡ ë°–ì˜ apple ì´ ìˆ¨ê²¨ì§„ë‹¤.    
`ì´ë¥¼ name hiding ì´ë¼ í•œë‹¤.`

```cpp
{
    int apple2 = 1;
    ...
}
```
ë”°ë¼ì„œ ë‹¤ë¥¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ì.

```cpp
namespace work1
{
    int a = 1;
    void doSomething()
    {
        a += 3;
    }
}

namespace work2
{
    int a = 1;
    void doSomething()
    {
        a += 5;
    }
}

int main()
{
    work1::a;
    work1::doSomething();
    cout << work1::a << endl;

    work2::a;
    work2::doSomething();
    cout << work2::a << endl;
    ...
}

// ì¶œë ¥
4
6
```
<pre>info notice :
:: ì˜ì—­(ë²”ìœ„) ê²°ì • ì—°ì‚°ì : Scope Resoultion Operator
</pre>{: .notice--warning}
<br><br>

### ì „ì—­ë³€ìˆ˜ Global Variable

```cpp
...
int g_a = 1;
...
```
**g_** ë¥¼ ë³€ìˆ˜ ì•ì— ë¶™ì—¬ ê¸€ë¡œë²Œ ë³€ìˆ˜ë¼ëŠ” ê²ƒì„ ëª…í™•íˆ í•œë‹¤.     
ë‹¤ë¥¸íŒŒì¼ì—ì„œ ì •ì˜ëœ í•¨ìˆ˜ë“¤ì—ì„œ ë°”ê¾¸ê³  ìˆë‹¤ë©´ ì¶”ì ì´ ì•ˆë˜ê³  ë””ë²„ê¹…ì´ ì•ˆëœë‹¤.    
ë”°ë¼ì„œ ì „ì—­ ë³€ìˆ˜ëŠ” ê°€ëŠ¥í•œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

```cpp
...
int value = 123;

int main()
{
    cout << value << endl; 

    int value = 1;

    cout << value << endl;      // name hiding
    cout << ::value << endl;	
    cout << value << endl;
    ...
}

// ì¶œë ¥
123
1
123
1
```
ì§€ì—­ë³€ìˆ˜ value ë¡œ ì¸í•´ ì „ì—­ë³€ìˆ˜ value ëŠ” ë„¤ì„ í•˜ì´ë”©ì´ ë˜ëŠ”ë°,    
ì´ë•Œ ì „ì—­ë³€ìˆ˜ value ë¥¼ ì“°ê¸° ìœ„í•´ì„œëŠ” ì˜ì—­ ì—°ì‚°ì ì¤‘ ì „ì—­ ì—°ì‚°ìì¸ **::** ë¥¼ ì‚¬ìš©í•œë‹¤.

### ì •ì  ë³€ìˆ˜ Static Variable
```cpp
void doSomething()
{
    static int s_a = 1;
    ++s_a; 
    cout << s_a << endl; 
}
```
**s_** ë¥¼ ë³€ìˆ˜ ì•ì— ë¶™ì—¬ ì •ì  ë³€ìˆ˜ë¼ëŠ” ê²ƒì„ ëª…í™•íˆ í•œë‹¤.     
ë³€ìˆ˜ s_a ê°€ OS ë¡œ ë¶€í„° ë°›ì€ ë©”ëª¨ë¦¬ê°€ Static ì´ë¼ëŠ” ëœ»ì´ë‹¤.    
ì¦‰, í• ë‹¹ëœ ë©”ëª¨ë¦¬ê°€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.    
static ë³€ìˆ˜ëŠ” ì„ ì–¸ê³¼ ë™ì‹œì— ì´ˆê¸°í™” í•´ì•¼í•˜ëŠ”ë° ì´ëŠ” ë©”ëª¨ë¦¬ê°€ ê³ ì •ë˜ëŠ” ë³€ìˆ˜ì´ë¯€ë¡œ ë‹¹ì—°í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.    
`í˜¹ì€ Static Variable ëŒ€ì‹  ë§¤ê°œë³€ìˆ˜ë¡œ a ë¥¼ ë°›ì•„ì„œ ì‚¬ìš©í•˜ë„ë¡ ì„¤ê³„í•œë‹¤.`

```cpp
int main()
{
    doSomething();
    doSomething();
    doSomething();
    doSomething();
    ...
}

// ì¶œë ¥
2
3
4
5
```

### ë‚´ë¶€ ì—°ê²° Internal Linkage, ì™¸ë¶€ ì—°ê±¸ External Linkage
Linkage : ì—¬ëŸ¬ cppíŒŒì¼ì— í©ì–´ì ¸ì„œ ì •ì˜ë˜ì–´ìˆëŠ” ë³€ìˆ˜ë“¤ì„ ë§í‚¹í•˜ë©´ì„œ íŒŒì¼ë“¤ê°„ì˜ ì—°ê²°ê´€ê³„ë¥¼ ë§Œë“¤ì–´ì¤„ê±´ì§€, ì—°ê²°ê´€ê³„ë¥¼ ì•ˆë§Œë“¤ê³  ë‚´ë¶€ì—ì„œë§Œ ì“¸ê±´ì§€ë¥¼ ê²°ì •í•œë‹¤.    

- No Linkage : ë¸”ëŸ­ ë‚´ë¶€ì— ë³€ìˆ˜ì˜ ì‚¬ìš©ë²”ìœ„ê°€ ì œí•œë˜ì–´ìˆë‹¤. (local variable)
- ë‚´ë¶€ì—°ê²° Internal Linkage : íŒŒì¼ ë‚´ë¶€ì—ì„œëŠ” ì–´ë””ì„œë“  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.     
- ì™¸ë¶€ì—°ê²° External Linkage : í•œ cpp íŒŒì¼ì—ì„œ ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ë‹¤ë¥¸ cpp íŒŒì¼ì—ì„œ ì§ì ‘ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.
<pre>info notice : 
ë³€ìˆ˜ë¥¼ ì—¬ëŸ¬ íŒŒì¼ì„ ì™”ë‹¤ê°”ë‹¤í•˜ë©´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ì•Šë‹¤.</pre>{: .notice--warning}

#### ë³€ìˆ˜ ë‚´ë¶€ ì—°ê²° Internal Linkage
```cpp
...
static int g_a = 1;
...
```
ë‹¤ë¥¸ cpp íŒŒì¼ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ì§€ë§Œ íŒŒì¼ ë‚´ë¶€ì—ì„œëŠ” ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì •ì  ì „ì—­ë³€ìˆ˜ì´ë‹¤.

#### í•¨ìˆ˜ ì™¸ë¶€ ì—°ê²° External Linkage
```cpp
// forward declaration
extern void doSomething();	
```
ì „ë°©ì„ ì–¸ forward declaration : ì–´ë”˜ê°€ì— doSomething ì´ë¼ëŠ” í•¨ìˆ˜ì˜ body(ëª¸ì²´) ê°€ ì •ì˜ë˜ì–´ ìˆì„í…Œë‹ˆ ê·¸ê²ƒìœ¼ë¡œ ë§í‚¹í•˜ë¼ê³  ì•Œë ¤ì£¼ëŠ” ëœ»ì´ë‹¤.
extern ì€ ë³´í†µ ìƒëµí•œë‹¤.

```cpp
// in MyConstants.h
#pragma once

namespace Constants
{
    const double pi(3.141592);
    const double gravity(9.8);
    ...
}

// in test.cpp
#include <iostream>
#include "MyConstants.h"

void doSomething()
{
    using namespace std;

    cout << "In test.cpp " << Constants::pi << " " << &Constants::pi << endl;
}
```

```cpp
// in main.cpp

#include <iostream>
//#include "test.cpp"   // ì•„ë˜ì˜ info notice ì—ì„œ ì¶”ê°€ë¡œ ê¸°ìˆ .
using namespace std;

// forward declaration
void doSomething();     // extern ìƒëµ.

int main()
{
    doSomething();	
    ...
}

// ì¶œë ¥
In test.cpp 3.14159 008A9BF8
123
```
ì „ë°©ì„ ì–¸ í›„ test.cpp ì— ìˆëŠ” doSomething() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

<pre>info notice :
cpp íŒŒì¼ì„ include í•˜ëŠ” ê²½ìš°ê°€ ìˆì§€ë§Œ ê°€ê¸‰ì ì´ë©´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
ë”°ë¼ì„œ #include "test.cpp" ë¥¼ ìƒëµí•œë‹¤.</pre>{: .notice--warning}

#### ë³€ìˆ˜ ì™¸ë¶€ ì—°ê²° External Linkage
```cpp
// in test.cpp
...
extern int a = 123;	

void doSomething()
...
```
main.cpp ì—ì„œ extern int a ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì´ˆê¸°í™”ê°€ í•„ìš”í•˜ë‹¤.

```cpp
// in main.cpp
...
// forward declaration
extern int a;
//extern int a = 456; // ì´ˆê¸°í™” ì£¼ì˜

int main()
{
    ...
    cout << a << endl;
    ...
}

// ì¶œë ¥
123
```

**ì£¼ì˜ì‚¬í•­**
- test.cpp ì—ì„œ extern int a ì˜ ì´ˆê¸°í™”ë¥¼ ì‹œí‚¤ì§€ ì•Šì„ ê²½ìš° : 
ì „ë°©ì„ ì–¸ extern int a ë¡œ ì–´ë”˜ê°€ì— a ë¼ëŠ” ë³€ìˆ˜ì˜ ë©”ëª¨ë¦¬ê°€ ìˆë‹¤ëŠ” ê²ƒì„ ì»´íŒŒì¼ëŸ¬ì—ê²Œ ì•Œë ¤ì¤¬ê¸° ë•Œë¬¸ì— mainì—ì„œ aë¥¼ ì¶œë ¥í•˜ëŠ” ì½”ë“œì—ì„œ ì»´íŒŒì¼ ì—ëŸ¬ëŠ” ì—†ì§€ë§Œ aì˜ ë©”ëª¨ë¦¬ë¥¼ ì°¾ì§€ëª»í•´ ë§í‚¹ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
- test.cpp ì™€ main.cpp ëª¨ë‘ extern int a ì˜ ì´ˆê¸°í™”ë¥¼ ì‹œì¼œì¤„ ê²½ìš° : ì´ˆê¸°í™”ë¥¼ í•˜ë©´ ì „ë°©ì„ ì–¸ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— í”„ë¡œê·¸ë¨ ì „ì²´ì—ì„œ ë´¤ì„ë•Œ a ë¼ëŠ” ì´ë¦„ì„ ê°€ì§„ ë³€ìˆ˜ê°€ 2ê°œë¡œ ì¤‘ë³µë˜ê³ , ì¶©ëŒí•˜ì—¬ ë§í‚¹ì—ëŸ¬ê°€ ìƒê¸´ë‹¤.

#### ë‹¤ë¥¸ íŒŒì¼ì˜ ì „ì—­ìƒìˆ˜ ì‚¬ìš©
```cpp
// in test.cpp
#include <iostream>
#include "MyConstants.h"

void doSomething()
{
    using namespace std;

    cout << "In test.cpp " << Constants::pi << " " << &Constants::pi << endl;
}

// in MyConstants.h
#pragma once
namespace Constants
{
    const double pi(3.141592);
    const double gravity(9.8);
    // ...
}	
```
```cpp
// in main.cpp
#include <iostream>
#include "MyConstants.h"

using namespace std;

// forward declaration
void doSomething();

int main()
{
    cout << "In main.cpp file " << Constants::pi << " " << &Constants::pi << endl;

    doSomething();  
    ...
}

// ì¶œë ¥
In main.cpp file 3.14159 00499B30
In test.cpp 3.14159 00499B80
```
MyConstants.h ì˜ ì „ì—­ìƒìˆ˜ë¥¼ ë‹¤ë¥¸ íŒŒì¼ì—ì„œ ê°ê° ì‚¬ìš©í•  ë•Œ ì£¼ì†Œë¥¼ ì‚´í´ë³´ë©´ ì „ì—­ìƒìˆ˜ë¥¼ ì‚¬ìš©í•œ íŒŒì¼ì˜ ê°œìˆ˜ë§Œí¼ì˜ ë©”ëª¨ë¦¬ì˜ ì‚¬ë³¸ì´ ìƒì„±ëœë‹¤.
ì „ì—­ìƒìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì´ ë§ì•„ì§ˆìˆ˜ë¡ ë” ë§ì€ ë©”ëª¨ë¦¬ì˜ ì‚¬ë³¸ì´ ìƒê¸°ë¯€ë¡œ ë©”ëª¨ë¦¬ì˜ ë‚­ë¹„ê°€ ìƒê¸´ë‹¤.

```cpp
// in MyConstants.h
#pragma once

namespace Constants
{
    extern const double pi;
    extern const double gravity;
    // ...
}

// in MyConstants.cpp
namespace Constants
{
    extern const double pi(3.141592);
    extern const double gravity(9.8);
    // ...
}

// in main.cpp
...

int main()
{
    cout << "In main.cpp file " << Constants::pi << " " << &Constants::pi << endl;

    doSomething();  
    ...
}

// ì¶œë ¥
In main.cpp file 3.14159 00FC9B68
In test.cpp 3.14159 00FC9B68
```
ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´
MyConstants.h ì—ì„œëŠ” extern ìœ¼ë¡œ ì„ ì–¸ë§Œ í•˜ê³  MyConstants.cpp ì—ì„œ extern ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤.    
ê²°ê³¼ëŠ” ë™ì¼í•œ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.






<pre>ë³¸ ë¸”ë¡œê·¸ëŠ” ê°œì¸ ê³µë¶€ ê¸°ë¡ì˜ ëª©ì ì„ ê°€ì§‘ë‹ˆë‹¤. í¬ìŠ¤íŠ¸ì˜ ë‚´ìš©ì€ ì–¸ì œë“ ì§€ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤.</pre>{: .notice--info}